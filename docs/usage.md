# ENJAPP 使用ガイド

このドキュメントでは、ENJAPPの詳細な使用方法について説明します。

## 基本的な使い方

### アプリケーションの起動

1. 統合ランチャーを使用する方法（推奨）:
   ```bash
   python app.py
   ```
   これにより、翻訳サーバーとモニターアプリケーションが一括で起動します。

2. コンポーネントを個別に起動する方法:
   ```bash
   # 翻訳サーバーを起動
   python -m translator_main.translator.server_client.translate_server_run
   
   # 別のターミナルでモニター翻訳ツールを起動
   python -m translator_main.translator.gui.qt_translator
   ```

### テキスト翻訳の手順

1. ENJAPPを起動すると、「お手軽翻訳ツール」というウィンドウが表示されます。
2. 翻訳したいテキストが表示されている画面を開きます。
3. **Shift + Alt + Z** キーを同時に押しながら、マウスをドラッグして翻訳したい範囲を選択します。
   - 押した位置が始点、離した位置が終点となります。
4. 選択した範囲のテキストがOCRで読み取られ、翻訳結果がウィンドウに表示されます。

### 翻訳履歴の表示

1. ENJAPPのメインウィンドウで「履歴」ボタンをクリックします。
2. 過去の翻訳履歴が表示されます。
3. 履歴から項目をクリックすると、その翻訳内容が再表示されます。

## 設定のカスタマイズ

### 環境変数による設定

`.env`ファイルを作成または編集して、以下の環境変数を設定できます：

```
# OCR言語設定
DEFAULT_OCR_LANGUAGE="jpn+eng"

# 翻訳先言語設定
DEFAULT_TARGET_LANGUAGE="en-US"

# Tesseractのパス設定
TESSERACT_PATH="C:\Program Files\Tesseract-OCR\tesseract.exe"

# GPUの使用設定
USE_GPU=false

# NPUの使用設定
USE_NPU=false

# モデルキャッシュの使用設定
USE_MODEL_CACHE=true
```

### モデルキャッシュについて

`USE_MODEL_CACHE`環境変数により、Hugging Faceのモデルキャッシュ機能を制御できます：

- `true`（デフォルト）: モデルをダウンロード後、ローカルにキャッシュして再利用します。
- `false`: キャッシュを使用せず、毎回モデルをダウンロードします。

キャッシュを使用すると、2回目以降の起動が高速になりますが、ディスク容量を消費します。

## 高度な機能

### 背景透過モード

1. ENJAPPのメインウィンドウで「設定」ボタンをクリックします。
2. 「背景を透過する」オプションをオンにします。
3. 適用ボタンをクリックして設定を保存します。

背景透過モードでは、ウィンドウの背景が透明になり、下のアプリケーションが見えるようになります。

### ホットキーのカスタマイズ

現在のバージョンでは、ホットキー（Shift + Alt + Z）はハードコードされています。将来のバージョンでカスタマイズ機能が追加される予定です。

## トラブルシューティング

### 翻訳サーバーが起動しない場合

- 必要なライブラリがすべてインストールされているか確認してください。
- ポート11451が他のアプリケーションで使用されていないか確認してください。
- ファイアウォール設定を確認してください。

### OCRの精度が低い場合

- Tesseract OCRが正しくインストールされているか確認してください。
- 適切な言語パックがインストールされているか確認してください。
- キャプチャする範囲を調整して、テキストがより明確に見えるようにしてください。

### 翻訳モデルのダウンロードに失敗する場合

- インターネット接続を確認してください。
- プロキシ設定を確認してください。
- 一時的にモデルキャッシュを無効にしてみてください（`USE_MODEL_CACHE=false`）。
