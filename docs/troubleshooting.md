# ENJAPP トラブルシューティングガイド

このドキュメントでは、ENJAPPを使用する際に発生する可能性のある一般的な問題とその解決方法について説明します。

## 起動時の問題

### アプリケーションが起動しない

**症状**: `python app.py`を実行しても、アプリケーションが起動しない。

**解決策**:
1. 仮想環境が有効になっているか確認してください：
   ```bash
   # Windowsの場合
   .\venv\Scripts\activate
   
   # Linux/macOSの場合
   source venv/bin/activate
   ```

2. 必要なパッケージがすべてインストールされているか確認してください：
   ```bash
   pip install -e .
   ```

3. エラーメッセージを確認し、具体的な問題を特定してください。

### 翻訳サーバーが起動しない

**症状**: 「翻訳サーバーに接続できません」というエラーメッセージが表示される。

**解決策**:
1. ポート11451が他のアプリケーションで使用されていないか確認してください：
   ```bash
   # Windowsの場合
   netstat -ano | findstr 11451
   
   # Linux/macOSの場合
   netstat -tuln | grep 11451
   ```

2. ファイアウォール設定を確認してください。

3. 手動で翻訳サーバーを起動して、エラーメッセージを確認してください：
   ```bash
   python -m translator_main.translator.server_client.translate_server_run
   ```

## モデル関連の問題

### モデルのダウンロードに失敗する

**症状**: 「モデルをダウンロードしています...」というメッセージの後にエラーが発生する。

**解決策**:
1. インターネット接続を確認してください。

2. プロキシ設定を確認してください。

3. 一時的にモデルキャッシュを無効にしてみてください：
   ```
   # .envファイルに追加
   USE_MODEL_CACHE=false
   ```

4. Hugging Faceのウェブサイトにアクセスできるか確認してください：
   https://huggingface.co/facebook/m2m100_418M

### モデルのロードに時間がかかる

**症状**: アプリケーションの起動に非常に時間がかかる。

**解決策**:
1. モデルキャッシュが有効になっているか確認してください：
   ```
   # .envファイルに追加
   USE_MODEL_CACHE=true
   ```

2. ディスク容量が十分にあるか確認してください。モデルは約1GBのスペースを必要とします。

3. GPUを使用して高速化することを検討してください（対応GPUがある場合）：
   ```
   # .envファイルに追加
   USE_GPU=true
   ```

## OCR関連の問題

### テキスト認識の精度が低い

**症状**: OCRで認識されたテキストが不正確または不完全。

**解決策**:
1. Tesseract OCRが正しくインストールされているか確認してください。

2. 適切な言語パックがインストールされているか確認してください。

3. キャプチャする範囲を調整して、テキストがより明確に見えるようにしてください。

4. テキストのコントラストが高い画面で試してください。

### Tesseractが見つからないエラー

**症状**: 「Tesseractが見つかりません」というエラーメッセージが表示される。

**解決策**:
1. Tesseract OCRがインストールされているか確認してください：
   [Tesseract-OCR for Windows](https://github.com/UB-Mannheim/tesseract/wiki)

2. `.env`ファイルでTesseractのパスを正しく設定してください：
   ```
   TESSERACT_PATH=C:\Program Files\Tesseract-OCR\tesseract.exe
   ```

3. システムのPATH環境変数にTesseractのディレクトリが含まれているか確認してください。

## GUI関連の問題

### ホットキーが機能しない

**症状**: Shift + Alt + Zを押しても、キャプチャが開始されない。

**解決策**:
1. 他のアプリケーションがこのホットキーを使用していないか確認してください。

2. アプリケーションが管理者権限で実行されているか確認してください。

3. アプリケーションを再起動してください。

### 翻訳ウィンドウが表示されない

**症状**: キャプチャ後に翻訳結果が表示されない。

**解決策**:
1. ウィンドウが画面外に移動していないか確認してください。

2. アプリケーションを再起動してください。

3. ログを確認して、エラーがないか確認してください。

## インストーラ関連の問題

### Windows Defenderの警告

**症状**: インストール時にWindows Defenderが警告を表示する。

**解決策**:
1. これは署名されていないアプリケーションに対する一般的な警告です。「詳細情報」をクリックし、「実行」を選択してください。

2. 信頼できるソースからインストーラをダウンロードしたことを確認してください。

### 既存のバージョンが自動的にアンインストールされない

**症状**: 新しいバージョンをインストールしても、古いバージョンが残っている。

**解決策**:
1. 手動で既存のバージョンをアンインストールしてください：
   - Windowsの「プログラムと機能」からアンインストール
   - または、インストールディレクトリにあるunins000.exeを実行

2. インストーラのログを確認して、エラーがないか確認してください。

## その他の問題

### メモリ使用量が多い

**症状**: アプリケーションの実行中にメモリ使用量が急増する。

**解決策**:
1. 翻訳履歴を定期的にクリアしてください。

2. 長時間使用した後はアプリケーションを再起動してください。

3. GPU使用時は、`USE_GPU=true`の設定が正しく適用されているか確認してください。

### クリップボードの問題

**症状**: クリップボードの内容が予期せず変更される。

**解決策**:
1. ENJAPPは翻訳のためにクリップボードを使用します。重要なデータがある場合は、事前に別の場所に保存してください。

2. アプリケーションを終了すると、クリップボードの内容がクリアされます。

## サポートを受ける方法

上記の解決策で問題が解決しない場合は、以下の方法でサポートを受けることができます：

1. GitHubのIssueを作成して、問題を報告してください。
2. 問題の詳細、再現手順、エラーメッセージを含めてください。
3. 可能であれば、ログファイルやスクリーンショットを添付してください。
